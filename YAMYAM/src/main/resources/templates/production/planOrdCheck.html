<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layout}">

<head>
<meta charset="UTF-8">
<title>YAMYAM</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>

<body>
	<!-- 본문 시작 -->
	<div layout:fragment="content" class="container">
		<h3>생산지시 조회</h3>
		<div>
			<table style="width: 100%;">
				<tr>
					<td style="width: 70px;">지시일자 &nbsp;</td>
					<td>
						<div class="tui-datepicker-input tui-datetime-input tui-has-focus">
					        <input id="startpicker-input" type="text" aria-label="Date">
					        <span class="tui-ico-date"></span>
					        <div id="startpicker-container" style="margin-left: -1px;"></div>
					    </div>
					    <span>-</span>
					    <div class="tui-datepicker-input tui-datetime-input tui-has-focus">
					        <input id="endpicker-input" type="text" aria-label="Date">
					        <span class="tui-ico-date"></span>
					        <div id="endpicker-container" style="margin-left: -1px;"></div>
					    </div>
						<button type="button" id="searchBtn"
							class="btn btn-dark btn-sm">검색</button>
						<button type="button" id="cancelBtn"
							class="btn btn-dark btn-sm">초기화</button>
					</td>
					<td></td>
				</tr>
				<tr>
					<td colspan="3">
						<div id="grid"></div>
					</td>
				</tr>
				
			</table>

		</div>

	<script>
		
		//date picker 초기화
		searchInit(); 
		gridInit();
		
		cancelBtnHandler();  //  date picker input 값 초기화 버튼
		searchBtnHandler();	 //  date picker input 값 조회 버튼

		/*------------
		// grid 초기화
		----------------*/
		function gridInit(){
			let grid = new tui.Grid({
				el : document.getElementById('grid'),
				// 임시 데이터
				data : [{
							podCd : 'PID-20221101-001',
							prdCd : 'MD-00200',
							name : '얇은피 김치만두',
							amt : '500',
							plineCd : 'LINE-BAR-001',
							prio : '1',
							sts : '완료'},
						{
							podCd : 'PID-20221101-002',
							prdCd : 'MD-00300',
							name : '얇은피 새우만두',
							amt : '300', 
							plineCd : 'LINE-BAR-002',
							prio : '2',
							sts : '진행'
						}],
				// data 가져오는 법
				// data: {
				// 	api: {
				// 		readData: {
				// 			url: '/api/readData',
				// 			method: 'GET'
				// 		}
				// 	}
				// },
				scrollX : false,
				scrollY : false,
				rowHeaders: ['rowNum'],				
				columns : [ 
				{
					header : '생산지시코드',
					name : 'podCd',
				}, {
					header : '제품코드',
					name : 'prdCd'
				}, {
					header : '제품명',
					name : 'name'
				}, {
					header : '생산수량',
					name : 'amt'				
				}, {
					header : '라인코드',
					name : 'plineCd',
				}, {
					header : '지시우선순위',
					name : 'prio',
				}, {
					header : '진행구분',
					name : 'sts',
					filter: {
				        type: 'select'
				      }
					
				}, {
					header : '비고',
					name : 'other',
				}, ]
			});
		}
		
			
			/*------------
			// datepicker
			----------------*/	
			function searchInit(){
				// toast - datepicker
				rangeDatepickerInit('#startpicker-input', '#startpicker-container','#endpicker-input','#endpicker-container')
			}
			
			/*------------
			// 검색버튼 이벤트 핸들러
			----------------*/
			function searchBtnHandler(){

				$('#searchBtn').on('click',function(){
					let getStartDay = $("#startpicker-input").val();
					let getEndDay = $("#endpicker-input").val();
					console.log(getStartDay);
					console.log(getEndDay);
					// 갖고온 start, end 값을 넘겨서 select 해오기
					// ajax 받아오고
					// success : function(data){manageGrid.resetData(data);}
					
				})
			}

			
			
			/*------------
			// datePicker 초기화버튼 이벤트 핸들러
			----------------*/
			function cancelBtnHandler(){
				$('#cancelBtn').on('click',function(){

					$("#startpicker-input").val(today);
					$("#endpicker-input").val(today);
				});	
			}

	</script>

	</div>

	<!-- 본문 끝 -->

</body>

</html>